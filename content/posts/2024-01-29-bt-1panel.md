---
title: 记录从宝塔迁移wordpress到1panel的流程
author: 梦随乡兮
type: post
date: 2024-01-29T02:08:37+00:00
url: /bt-1panel.html
featured_image: https://r2.imsxx.com/wp-content/uploads/word-image-774-14.png
views:
  - 2184
like:
  - 1
categories:
  - 笔记
tags:
  - 1panel面板
  - 宝塔面板
  - 建站
  - 服务器

slug: "bt-1panel"
---
宝塔越更新广告越多，能理解宝塔要恰饭，但广告越来越多广告模块还越来越大，多少让我有点无语。我寻思自己平时也用不到什么付费服务，就干脆换成目前清爽的1panel面板。以下就是博客完整的迁移流程。

<div id="ez-toc-container" class="ez-toc-v2_0_73 counter-hierarchy ez-toc-counter ez-toc-transparent ez-toc-container-direction">
  <div class="ez-toc-title-container">
    <p class="ez-toc-title" style="cursor:inherit">
      本文目录
    </p>
    
    <span class="ez-toc-title-toggle"><a href="#" class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle" aria-label="Toggle Table of Content"><span class="ez-toc-js-icon-con"><span class=""><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg style="fill: #999;color:#999" xmlns="http://www.w3.org/2000/svg" class="list-377408" width="20px" height="20px" viewBox="0 0 24 24" fill="none"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"></path></svg><svg style="fill: #999;color:#999" class="arrow-unsorted-368013" xmlns="http://www.w3.org/2000/svg" width="10px" height="10px" viewBox="0 0 24 24" version="1.2" baseProfile="tiny"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span>
  </div><nav>
  
  <ul class='ez-toc-list ez-toc-list-level-1 ' >
    <li class='ez-toc-page-1 ez-toc-heading-level-2'>
      <a class="ez-toc-link ez-toc-heading-1" href="https://imsxx.com/bt-1panel.html/#%E6%89%93%E5%8C%85%E7%BD%91%E7%AB%99%E6%95%B0%E6%8D%AE" title="打包网站数据">打包网站数据</a>
    </li>
    <li class='ez-toc-page-1 ez-toc-heading-level-2'>
      <a class="ez-toc-link ez-toc-heading-2" href="https://imsxx.com/bt-1panel.html/#%E5%AE%89%E8%A3%851panel%E9%9D%A2%E6%9D%BF" title="安装1panel面板">安装1panel面板</a>
    </li>
    <li class='ez-toc-page-1 ez-toc-heading-level-2'>
      <a class="ez-toc-link ez-toc-heading-3" href="https://imsxx.com/bt-1panel.html/#%E9%85%8D%E7%BD%AE1panel%E9%9D%A2%E6%9D%BF" title="配置1panel面板">配置1panel面板</a><ul class='ez-toc-list-level-3' >
        <li class='ez-toc-heading-level-3'>
          <a class="ez-toc-link ez-toc-heading-4" href="https://imsxx.com/bt-1panel.html/#%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99" title="创建网站">创建网站</a>
        </li>
        <li class='ez-toc-page-1 ez-toc-heading-level-3'>
          <a class="ez-toc-link ez-toc-heading-5" href="https://imsxx.com/bt-1panel.html/#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93" title="创建数据库">创建数据库</a>
        </li>
      </ul>
    </li>
    
    <li class='ez-toc-page-1 ez-toc-heading-level-2'>
      <a class="ez-toc-link ez-toc-heading-6" href="https://imsxx.com/bt-1panel.html/#%E6%B5%8B%E8%AF%95%E7%BD%91%E7%AB%99" title="测试网站">测试网站</a><ul class='ez-toc-list-level-3' >
        <li class='ez-toc-heading-level-3'>
          <a class="ez-toc-link ez-toc-heading-7" href="https://imsxx.com/bt-1panel.html/#%E9%85%8D%E7%BD%AE%E4%BC%AA%E9%9D%99%E6%80%81" title="配置伪静态">配置伪静态</a>
        </li>
        <li class='ez-toc-page-1 ez-toc-heading-level-3'>
          <a class="ez-toc-link ez-toc-heading-8" href="https://imsxx.com/bt-1panel.html/#%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6" title="配置SSL证书">配置SSL证书</a>
        </li>
      </ul>
    </li>
    
    <li class='ez-toc-page-1 ez-toc-heading-level-2'>
      <a class="ez-toc-link ez-toc-heading-9" href="https://imsxx.com/bt-1panel.html/#%E8%BF%81%E7%A7%BB%E5%AE%8C%E6%88%90" title="迁移完成">迁移完成</a>
    </li>
  </ul></nav>
</div>

## <span class="ez-toc-section" id="%E6%89%93%E5%8C%85%E7%BD%91%E7%AB%99%E6%95%B0%E6%8D%AE"></span>打包网站数据<span class="ez-toc-section-end"></span>

使用宝塔提供的网站备份和数据库备份即可，备份完成后下载到本地。

<img loading="lazy" decoding="async" width="799" height="264" class="wp-image-775 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-1.png" /> 

<img loading="lazy" decoding="async" width="883" height="408" class="wp-image-776 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-2.png" /> 

## <span class="ez-toc-section" id="%E5%AE%89%E8%A3%851panel%E9%9D%A2%E6%9D%BF"></span>安装1panel面板<span class="ez-toc-section-end"></span>

网站数据备份后，去云服务上那里重新装一下系统，我个人使用的debian12。系统重装ssh登录到系统，debian使用：

curl -sSL https://resource.fit2cloud.com/1panel/package/quick\_start.sh -o quick\_start.sh && bash quick_start.sh

开始安装1panel面板，其他系统自行去官网查看安装命令，1panel官网：<a rel="nofollow" href="https://1panel.cn/" target="_blank" rel="noopener">https://1panel.cn/</a>

面板安装完成后去服务器防火墙放通面板端口，不然打不开面板。

## <span class="ez-toc-section" id="%E9%85%8D%E7%BD%AE1panel%E9%9D%A2%E6%9D%BF"></span>配置1panel面板<span class="ez-toc-section-end"></span>

来到1panel后台点击侧栏的“网站”会提示跳转安装OpenResty平台。

<img loading="lazy" decoding="async" width="1267" height="607" class="wp-image-777 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-3.png" /> 

安装OpenResty后，再点击“运行环境”安装wordpress必要的PHP：

<img loading="lazy" decoding="async" width="1267" height="607" class="wp-image-778 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-4.png" /> 

※PHP版本最好和你在宝塔的一致。下面的PHP扩展可以先设置，也可以配置完后按需修改。

### <span class="ez-toc-section" id="%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99"></span>创建网站<span class="ez-toc-section-end"></span>

等待PHP安装完成后，回到网站栏，点击创建网站，然后点**运行环境**，**不是一键部署**。

<img loading="lazy" decoding="async" width="1267" height="607" class="wp-image-779 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-5.png" /> 

↑选择刚才安装的PHP版本，输入网站的域名，点确认。

创建网站完成后，点开对应的目录。

<img loading="lazy" decoding="async" width="835" height="278" class="wp-image-780 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-6.png" /> 

1panel的网站目录是在index下面，我们进到index目录，把备份下来的网站传上来。

<img loading="lazy" decoding="async" width="927" height="468" class="wp-image-781 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-7.png" /> 

<img loading="lazy" decoding="async" width="1732" height="904" class="wp-image-782 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-8.png" /> 

然后直接解压到当前目录，**解压后务必把压缩文件删掉，避免被他人下载泄露网站密码。**

<img loading="lazy" decoding="async" width="1742" height="912" class="wp-image-783 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-9.png" /> 

导入成功后，回到网站设置这里，在网站目录中把权限保存一下。**很多人不做这一步导致wordpress迁移后WP程序因权限报错访问不了插件主题也传不了图片文件。**

<img loading="lazy" decoding="async" width="1320" height="824" class="wp-image-784 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-10.png" /> 

### <span class="ez-toc-section" id="%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"></span>创建数据库<span class="ez-toc-section-end"></span>

接下来就是数据库了，在应用商店搜索安装MySQL(不一定是MySQL你之前用的什么数据库就安装什么)，我的网站是MySQL：

<img loading="lazy" decoding="async" width="777" height="471" class="wp-image-785 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-11.png" /> 

安装完成后，到数据库创建。如果你记不住之前网站的数据库名称用户名密码了，不要紧，现在重新设置一个就可以了，等会儿要去修改。

<img loading="lazy" decoding="async" width="1267" height="607" class="wp-image-786 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-12.png" /> 

创建完成后导入备份，操作逻辑和上面导入网站文件是一样的。如果解压报错，就把数据库压缩文件里的sql文件解压出来上传。

<img loading="lazy" decoding="async" width="1725" height="586" class="wp-image-787 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-13.png" /> 

上传完成后点击恢复。

这时候我们还打不开网站，因为网站现在没连接到我们刚才创建好的数据库。那么我们回到网站目录下，打开wp-config.php：

<img loading="lazy" decoding="async" width="779" height="491" class="wp-image-788 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-14.png" /> 

把刚才我们设置的数据库名称、用户名、密码分别填写进去。

需要注意，由于1panel是用容器在关联各个功能，因此主机那里原本的**localhost**需要改成**mysql**，否则即使名称用户名密码都对了也连不上数据库。

<img loading="lazy" decoding="async" width="734" height="284" class="wp-image-789 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-15.png" /> 

改好后保存。

## <span class="ez-toc-section" id="%E6%B5%8B%E8%AF%95%E7%BD%91%E7%AB%99"></span>测试网站<span class="ez-toc-section-end"></span>

这时候我们打开网站，已经成功访问了。

<img loading="lazy" decoding="async" width="1920" height="919" class="wp-image-790 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-16.png" /> 

但可以看到我的图片都崩了，这是因为没配置伪静态和SSL证书导致的。下面我们来配置。

### <span class="ez-toc-section" id="%E9%85%8D%E7%BD%AE%E4%BC%AA%E9%9D%99%E6%80%81"></span>配置伪静态<span class="ez-toc-section-end"></span>

打开网站配置，找到伪静态，选择wordpress，点击保存并重载。

<img loading="lazy" decoding="async" width="706" height="616" class="wp-image-791 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-17.png" /> 

### <span class="ez-toc-section" id="%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6"></span>配置SSL证书<span class="ez-toc-section-end"></span>

打开HTTPS，1panel的网站证书配置没宝塔那么方便。我们可以看到这里默认情况下没办法配置证书。

<img loading="lazy" decoding="async" width="781" height="657" class="wp-image-792 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-18.png" /> 

如果你是腾讯云阿里云域名，那么可以在腾讯阿里直接申请一张。比如我是腾讯云，就可以到控制台的SSL证书里，自动签发一张。

<img loading="lazy" decoding="async" width="887" height="742" class="wp-image-793 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-19.png" /> 

签发后，我们下载Nginx的服务器版本。

<img loading="lazy" decoding="async" width="544" height="501" class="wp-image-794 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-20.png" /> 

然后打开1Panel的网站-证书，选择上传证书。

<img loading="lazy" decoding="async" width="1084" height="522" class="wp-image-795 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-21.png" /> 

填写后确认。

<img loading="lazy" decoding="async" width="952" height="900" class="wp-image-796 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-22.png" /> 

回到网站刚才配置HTTPS的地方，就可以给网站配置上证书了。

<img loading="lazy" decoding="async" width="1034" height="748" class="wp-image-797 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-23.png" /> 

## <span class="ez-toc-section" id="%E8%BF%81%E7%A7%BB%E5%AE%8C%E6%88%90"></span>迁移完成<span class="ez-toc-section-end"></span>

现在我们再打开网站，可以看到已经完成了迁移，整个教程就到这里了。

<img loading="lazy" decoding="async" width="1267" height="607" class="wp-image-798 aligncenter" src="https://r2.imsxx.com/wp-content/uploads/word-image-774-24.png" /> 

希望1Panel以后能一如既往保持界面的干净，不要像宝塔那样过渡商业化。
